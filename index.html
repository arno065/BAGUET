<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAGUET FINDER - Localisateur de Distributeurs de Baguettes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Open Dyslexic', Arial, sans-serif;
            background-color: #D3B12A; /* Couleur de fond inspirée de la baguette */
        }

        @font-face {
            font-family: 'Open Dyslexic';
            src: url('https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/open-dyslexic-regular.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        #app {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        #sidebar {
            width: 100%;
            max-width: 400px;
            background-color: #F5DEB3;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            box-shadow: 2px 2px 15px rgba(0, 0, 0, 0.3);
        }

        #preferences {
            background-color: #FFEFD5;
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #D2691E;
            margin-bottom: 20px;
        }

        #distributors-list {
            flex-grow: 1;
            overflow-y: auto;
        }

        #map-container {
            flex-grow: 1;
            position: relative;
        }

        #map {
            height: 100%;
            width: 100%;
        }

        .distributor-item {
            background-color: #FFEFD5;
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #D2691E;
            transition: transform 0.2s;
        }

        .distributor-item:hover {
            transform: scale(1.02);
        }

        .stars {
            color: #FFD700;
        }

        .favorite {
            color: gold;
            cursor: pointer;
        }

        #language-select {
            margin-bottom: 10px;
        }

        .status-available {
            color: green;
        }

        .status-unavailable {
            color: red;
        }

        .status-empty {
            color: orange;
        }

        #add-distributor-form input,
        #add-distributor-form select {
            width: 100%;
            margin-bottom: 10px;
        }

        /* Media queries for responsive design */
        @media (max-width: 768px) {
            #app {
                flex-direction: column;
            }

            #sidebar {
                max-width: 100%;
            }

            #map-container {
                height: 400px;
            }
        }

        @media (max-width: 480px) {
            #sidebar {
                padding: 10px;
            }

            .distributor-item {
                padding: 10px;
            }

            #add-distributor-form input,
            #add-distributor-form select {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div id="sidebar">
            <div id="preferences">
                <h2>Préférences</h2>
                <label for="language-select">Langue :</label>
                <select id="language-select">
                    <option value="fr">Français</option>
                    <option value="en">English</option>
                </select>
                <h3>Favoris</h3>
                <ul id="favorites-list"></ul>
                <h3>Historique de recherche</h3>
                <ul id="search-history"></ul>
                <h3>Points de fidélité</h3>
                <p>Vos points : <span id="loyalty-points">0</span></p>
            </div>
            <div id="add-distributor-form">
                <h3>Ajouter un nouveau distributeur</h3>
                <form id="new-distributor-form">
                    <input type="text" id="new-name" placeholder="Nom" required>
                    <input type="text" id="new-address" placeholder="Adresse" required>
                    <input type="number" id="new-price" step="0.01" placeholder="Prix" required>
                    <select id="new-payment" multiple required>
                        <option value="cash">Espèces</option>
                        <option value="card">Carte</option>
                    </select>
                    <input type="text" id="new-photo" placeholder="URL de la photo" required>
                    <button type="submit">Soumettre pour modération</button>
                </form>
            </div>
            <div id="distributors-list"></div>
        </div>
        <div id="map-container">
            <div id="map"></div>
        </div>
    </div>

    <script>
        <script>
    const distributors = generateRandomDistributors(50); // Générer 50 distributeurs aléatoires

    let favorites = [];
    let searchHistory = [];
    let loyaltyPoints = 0;
    let currentLanguage = 'fr';
    let map;
    let markers = [];

    // Traductions
    const translations = {
        fr: {
            // vos traductions ici...
        },
        en: {
            // vos traductions ici...
        }
    };

    function generateRandomDistributors(num) {
        const distributorNames = [
            "Boulangerie Artisanale",
            "Le Fournil du Coin",
            "Distributeur de Baguettes",
            "Pain et Gourmandises",
            "Baguette Express",
            "La Boulangerie à Emporter",
            "Le Pain Quotidien",
            "Distri-Baguette",
            "Les Délices de France",
            "Boulangerie Française"
        ];

        const paymentMethods = [
            ["cash", "card"],
            ["cash"],
            ["card"],
            ["cash", "card"],
            ["card"]
        ];

        const statuses = ["available", "unavailable", "empty"];
        const latitudes = [
            48.8566,  // Paris
            43.6047,  // Toulouse
            48.5734,  // Strasbourg
            45.7640,  // Lyon
            44.8378,  // Bordeaux
            48.1114,  // Nice
            43.2931,  // Marseille
            47.2184,  // Nantes
            50.6292,  // Lille
            49.4444   // Metz
        ];
        const longitudes = [
            2.3522,   // Paris
            1.4442,   // Toulouse
            7.7521,   // Strasbourg
            4.8357,   // Lyon
            -0.5792,  // Bordeaux
            7.2619,   // Nice
            5.3745,   // Marseille
            -1.5532,  // Nantes
            3.0586,   // Lille
            6.1715    // Metz
        ];

        const distributors = [];

        for (let i = 0; i < num; i++) {
            const randomIndex = Math.floor(Math.random() * distributorNames.length);
            const randomLatIndex = Math.floor(Math.random() * latitudes.length);

            const distributor = {
                id: distributors.length + 1,
                name: distributorNames[randomIndex],
                lat: latitudes[randomLatIndex] + (Math.random() - 0.5) * 0.05, // Variation aléatoire
                lng: longitudes[randomLatIndex] + (Math.random() - 0.5) * 0.05, // Variation aléatoire
                address: `${Math.floor(Math.random() * 100)} Rue ${distributorNames[randomIndex]}`,
                price: (Math.random() * 2 + 0.5).toFixed(2), // Prix entre 0.5 et 2.5
                rating: Math.floor(Math.random() * 6), // Évaluation entre 0 et 5
                payment: paymentMethods[Math.floor(Math.random() * paymentMethods.length)],
                reviews: [],
                status: statuses[Math.floor(Math.random() * statuses.length)],
                photo: "https://via.placeholder.com/150"
            };

            distributors.push(distributor);
        }

        return distributors;
    }

    function initializeMap() {
        map = L.map('map').setView([46.6034, 1.8883], 5); // Vue centrée sur la France

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '© OpenStreetMap'
        }).addTo(map);

        distributors.forEach(distributor => {
            const marker = L.marker([distributor.lat, distributor.lng]).addTo(map);
            markers.push(marker);

            marker.on('click', () => {
                displayDistributorDetails(distributor);
            });
        });
    }

    // Initialiser la carte après le chargement de la page
    document.addEventListener("DOMContentLoaded", function() {
        initializeMap();
    });
</script>


        let favorites = [];
        let searchHistory = [];
        let loyaltyPoints = 0;
        let currentLanguage = 'fr';
        let map;
        let markers = [];

        const translations = {
            fr: {
                addReview: "Ajouter un avis",
                seeReviews: "Voir les avis",
                favorite: "Favori",
                viewOnMap: "Voir sur la carte",
                nearestDistributor: "Le distributeur le plus proche est",
                meters: "mètres",
                invalidInput: "Entrée invalide. Veuillez réessayer.",
                loyaltyPoints: "Points de fidélité",
                language: "Langue",
                favorites: "Favoris",
                searchHistory: "Historique de recherche",
                available: "Disponible",
                unavailable: "En panne",
                empty: "Vide",
                openInGoogleMaps: "Ouvrir dans Google Maps"
            },
            en: {
                addReview: "Add a review",
                seeReviews: "See reviews",
                favorite: "Favorite",
                viewOnMap: "View on map",
                nearestDistributor: "The nearest distributor is",
                meters: "meters",
                invalidInput: "Invalid input. Please try again.",
                loyaltyPoints: "Loyalty points",
                language: "Language",
                favorites: "Favorites",
                searchHistory: "Search history",
                available: "Available",
                unavailable: "Unavailable",
                empty: "Empty",
                openInGoogleMaps: "Open in Google Maps"
            }
        };

        function generateRandomDistributors(num) {
            const distributors = [];
            const names = [
                "Distributeur Boulangerie Paul", 
                "Distri-Baguette Express", 
                "Le Petit Boulanger Automatique", 
                "Baguette d'Or", 
                "Boulangerie des Champs"
            ];

            for (let i = 0; i < num; i++) {
                const lat = 48.0 + Math.random() * 5; // Latitude entre 48.0 et 53.0
                const lng = 2.0 + Math.random() * 5; // Longitude entre 2.0 et 7.0
                const nameIndex = Math.floor(Math.random() * names.length);
                
                distributors.push({
                    id: i + 1,
                    name: `${names[nameIndex]} ${i + 1}`,
                    lat: lat,
                    lng: lng,
                    address: `Adresse ${i + 1}`,
                    price: (Math.random() * 3 + 1).toFixed(2), // Prix entre 1 et 4 euros
                    rating: Math.floor(Math.random() * 5) + 1, // Évaluation entre 1 et 5
                    payment: ["cash", "card"], // Paiements disponibles
                    reviews: [],
                    status: "available",
                    photo: "https://via.placeholder.com/150"
                });
            }

            return distributors;
        }

        function initializeMap() {
            map = L.map('map').setView([46.6034, 1.8883], 5); // Vue centrée sur la France

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '© OpenStreetMap'
            }).addTo(map);

            distributors.forEach(distributor => {
                const marker = L.marker([distributor.lat, distributor.lng]).addTo(map);
                       // Générer des distributeurs aléatoires fictifs sur toute la France
        function generateRandomDistributors(num) {
            const distributorNames = [
                "Boulangerie Artisanale",
                "Le Fournil du Coin",
                "Distributeur de Baguettes",
                "Pain et Gourmandises",
                "Baguette Express",
                "La Boulangerie à Emporter",
                "Le Pain Quotidien",
                "Distri-Baguette",
                "Les Délices de France",
                "Boulangerie Française"
            ];

            const paymentMethods = [
                ["cash", "card"],
                ["cash"],
                ["card"],
                ["cash", "card"],
                ["card"]
            ];

            const statuses = ["available", "unavailable", "empty"];
            const latitudes = [
                48.8566,  // Paris
                43.6047,  // Toulouse
                48.5734,  // Strasbourg
                45.7640,  // Lyon
                44.8378,  // Bordeaux
                48.1114,  // Nice
                43.2931,  // Marseille
                47.2184,  // Nantes
                50.6292,  // Lille
                49.4444   // Metz
            ];
            const longitudes = [
                2.3522,   // Paris
                1.4442,   // Toulouse
                7.7521,   // Strasbourg
                4.8357,   // Lyon
                -0.5792,  // Bordeaux
                7.2619,   // Nice
                5.3745,   // Marseille
                -1.5532,  // Nantes
                3.0586,   // Lille
                6.1715    // Metz
            ];

            const distributors = [];

            for (let i = 0; i < num; i++) {
                const randomIndex = Math.floor(Math.random() * distributorNames.length);
                const randomLatIndex = Math.floor(Math.random() * latitudes.length);

                const distributor = {
                    id: distributors.length + 1,
                    name: distributorNames[randomIndex],
                    lat: latitudes[randomLatIndex] + (Math.random() - 0.5) * 0.05, // Variation aléatoire
                    lng: longitudes[randomLatIndex] + (Math.random() - 0.5) * 0.05, // Variation aléatoire
                    address: `${Math.floor(Math.random() * 100)} Rue ${distributorNames[randomIndex]}`,
                    price: (Math.random() * 2 + 0.5).toFixed(2), // Prix entre 0.5 et 2.5
                    rating: Math.floor(Math.random() * 6), // Évaluation entre 0 et 5
                    payment: paymentMethods[Math.floor(Math.random() * paymentMethods.length)],
                    reviews: [],
                    status: statuses[Math.floor(Math.random() * statuses.length)],
                    photo: "https://via.placeholder.com/150"
                };

                distributors.push(distributor);
            }

            return distributors;
        }

        // Remplacer les données de distributeurs par des données générées aléatoirement
        distributors = generateRandomDistributors(50); // Générer 50 distributeurs aléatoires

        // Réinitialiser la carte avec les nouveaux distributeurs
        function initializeMap() {
            map = L.map('map').setView([46.6034, 1.8883], 6); // Vue centrée sur la France

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '© OpenStreetMap'
            }).addTo(map);

            distributors.forEach(distributor => {
                const marker = L.marker([distributor.lat, distributor.lng]).addTo(map);
                markers.push(marker);

                marker.on('click', () => {
                    displayDistributorDetails(distributor);
                });
            });
        }
